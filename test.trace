{"version":8,"type":"context-options","origin":"testRunner","browserName":"","options":{},"platform":"linux","wallTime":1762821104430,"monotonicTime":18021.087,"sdkLanguage":"javascript"}
{"type":"before","callId":"hook@1","stepId":"hook@1","startTime":18028.557,"class":"Test","method":"hook","title":"Before Hooks","params":{},"stack":[]}
{"type":"before","callId":"fixture@25","stepId":"fixture@25","parentId":"hook@1","startTime":18045.518,"class":"Test","method":"fixture","title":"Fixture \"browser\"","params":{},"stack":[]}
{"type":"before","callId":"pw:api@26","stepId":"pw:api@26","parentId":"fixture@25","startTime":18049.878,"class":"Test","method":"pw:api","title":"Launch browser","params":{"handleSIGINT":"false","tracesDir":"/app/test-results/playwright/.playwright-artifacts-1/traces","headless":"true","ignoreDefaultArgs":"undefined","ignoreAllDefaultArgs":"false","env":"undefined","timeout":"180000"},"stack":[]}
{"type":"after","callId":"pw:api@26","endTime":18131.878,"annotations":[]}
{"type":"after","callId":"fixture@25","endTime":18132.063,"annotations":[]}
{"type":"before","callId":"fixture@29","stepId":"fixture@29","parentId":"hook@1","startTime":18134.371,"class":"Test","method":"fixture","title":"Fixture \"context\"","params":{},"stack":[]}
{"type":"before","callId":"pw:api@30","stepId":"pw:api@30","parentId":"fixture@29","startTime":18136.836,"class":"Test","method":"pw:api","title":"Create context","params":{"acceptDownloads":"accept","bypassCSP":"false","colorScheme":"light","deviceScaleFactor":"1","hasTouch":"false","ignoreHTTPSErrors":"true","isMobile":"false","javaScriptEnabled":"true","locale":"en-US","offline":"false","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.7390.37 Safari/537.36","viewport":"Object","baseURL":"http://localhost:5173","serviceWorkers":"allow","recordVideo":"Object","selectorEngines":"[]","testIdAttributeName":"data-testid","noDefaultViewport":"false","extraHTTPHeaders":"undefined","storageState":"undefined","reducedMotion":"undefined","forcedColors":"undefined","contrast":"undefined","clientCertificates":"undefined"},"stack":[]}
{"type":"after","callId":"pw:api@30","endTime":18145.804,"annotations":[]}
{"type":"after","callId":"fixture@29","endTime":18151.118,"annotations":[]}
{"type":"before","callId":"fixture@31","stepId":"fixture@31","parentId":"hook@1","startTime":18151.994,"class":"Test","method":"fixture","title":"Fixture \"page\"","params":{},"stack":[]}
{"type":"before","callId":"pw:api@32","stepId":"pw:api@32","parentId":"fixture@31","startTime":18154.841,"class":"Test","method":"pw:api","title":"Create page","params":{},"stack":[]}
{"type":"after","callId":"pw:api@32","endTime":18203.717,"annotations":[]}
{"type":"after","callId":"fixture@31","endTime":18203.837,"annotations":[]}
{"type":"after","callId":"hook@1","endTime":18203.908,"annotations":[]}
{"type":"before","callId":"test.step@33","stepId":"test.step@33","startTime":18206.61,"class":"Test","method":"test.step","title":"Programmatic Login","params":{},"stack":[{"file":"/app/tests/e2e/smoke.e2e.spec.ts","line":12,"column":16}]}
{"type":"before","callId":"pw:api@34","stepId":"pw:api@34","parentId":"test.step@33","startTime":18216.432,"class":"Test","method":"pw:api","title":"Add init script","params":{"source":"(() => {\n    // Create inline mock Supabase client\n    if (!window.__MOCK_SUPABASE_CLIENT_INITIALIZED__) {\n      window.__MOCK_SUPABASE_CLIENT_INITIALIZED__ = true;\n      const MOCK_SESSION_KEY = 'sb-mock-session';\n      let session = null;\n      try {\n        const storedSession = localStorage.getItem(MOCK_SESSION_KEY);\n        if (storedSession) {\n          session = JSON.parse(storedSession);\n        }\n      } catch (e) {\n        console.error('[MockClient] Failed to parse stored session:', e);\n        localStorage.removeItem(MOCK_SESSION_KEY);\n      }\n      const listeners = new Set();\n      window.supabase = {\n        auth: {\n          onAuthStateChange: callback => {\n            listeners.add(callback);\n            setTimeout(() => callback('INITIAL_SESSION', session), 0);\n            return {\n              data: {\n                subscription: {\n                  unsubscribe: () => listeners.delete(callback)\n                }\n              }\n            };\n          },\n          setSession: async sessionData => {\n            session = {\n              ...sessionData,\n              expires_at: Math.floor(Date.now() / 1000) + 3600\n            };\n            try {\n              localStorage.setItem(MOCK_SESSION_KEY, JSON.stringify(session));\n            } catch (e) {\n              console.error('[MockClient] Failed to save session to localStorage:', e);\n            }\n            listeners.forEach(listener => {\n              try {\n                listener('SIGNED_IN', session);\n              } catch (e) {\n                console.error('[MockAuth] Listener error:', e);\n              }\n            });\n            return {\n              data: {\n                session,\n                user: session.user\n              },\n              error: null\n            };\n          },\n          signOut: async () => {\n            session = null;\n            localStorage.removeItem(MOCK_SESSION_KEY);\n            listeners.forEach(listener => listener('SIGNED_OUT', null));\n            return {\n              error: null\n            };\n          },\n          getSession: async () => {\n            return {\n              data: {\n                session\n              },\n              error: null\n            };\n          }\n        },\n        from: table => {\n          const mockUserProfile = {\n            id: 'test-user-123',\n            email: 'test@example.com',\n            subscription_status: 'pro',\n            preferred_mode: 'cloud',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          };\n          const mockSessions = [{\n            id: 'session-1',\n            user_id: 'test-user-123',\n            created_at: new Date(Date.now() - 86400000).toISOString(),\n            duration: 300,\n            word_count: 750,\n            filler_word_count: 15,\n            average_pace: 150,\n            clarity_score: 85,\n            confidence_score: 78\n          }, {\n            id: 'session-2',\n            user_id: 'test-user-123',\n            created_at: new Date(Date.now() - 172800000).toISOString(),\n            duration: 420,\n            word_count: 1050,\n            filler_word_count: 12,\n            average_pace: 150,\n            clarity_score: 88,\n            confidence_score: 82\n          }, {\n            id: 'session-3',\n            user_id: 'test-user-123',\n            created_at: new Date(Date.now() - 259200000).toISOString(),\n            duration: 360,\n            word_count: 900,\n            filler_word_count: 10,\n            average_pace: 150,\n            clarity_score: 90,\n            confidence_score: 85\n          }];\n          return {\n            select: () => {\n              return {\n                eq: (column, value) => {\n                  if (table === 'user_profiles' && column === 'id' && value === mockUserProfile.id) {\n                    return {\n                      single: () => Promise.resolve({\n                        data: mockUserProfile,\n                        error: null\n                      })\n                    };\n                  }\n                  if (table === 'sessions') {\n                    return {\n                      order: (col, opts) => {\n                        const sorted = [...mockSessions].sort((a, b) => {\n                          if (opts.ascending) {\n                            return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\n                          }\n                          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n                        });\n                        return Promise.resolve({\n                          data: sorted,\n                          error: null\n                        });\n                      }\n                    };\n                  }\n                  return Promise.resolve({\n                    data: [],\n                    error: null\n                  });\n                },\n                order: (col, opts) => {\n                  if (table === 'sessions') {\n                    const sorted = [...mockSessions].sort((a, b) => {\n                      if (opts.ascending) {\n                        return new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\n                      }\n                      return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n                    });\n                    return Promise.resolve({\n                      data: sorted,\n                      error: null\n                    });\n                  }\n                  return Promise.resolve({\n                    data: [],\n                    error: null\n                  });\n                },\n                single: () => {\n                  if (table === 'user_profiles') {\n                    return Promise.resolve({\n                      data: mockUserProfile,\n                      error: null\n                    });\n                  }\n                  return Promise.resolve({\n                    data: null,\n                    error: null\n                  });\n                }\n              };\n            }\n          };\n        }\n      };\n    }\n  })(undefined)"},"stack":[{"file":"/app/tests/e2e/helpers.ts","line":20,"column":3,"function":"programmaticLogin"}],"group":"configuration"}
{"type":"after","callId":"pw:api@34","endTime":18219.869,"annotations":[]}
{"type":"before","callId":"pw:api@35","stepId":"pw:api@35","parentId":"test.step@33","startTime":18222.494,"class":"Test","method":"pw:api","title":"Navigate to \"/\"","params":{"url":"/","waitUntil":"load","timeout":"0"},"stack":[{"file":"/app/tests/e2e/helpers.ts","line":194,"column":14,"function":"programmaticLogin"}]}
{"type":"stdout","timestamp":18298.656,"text":"[BROWSER CONSOLE] debug: [vite] connecting...\n"}
{"type":"stdout","timestamp":18344.98,"text":"[BROWSER CONSOLE] debug: [vite] connected.\n"}
{"type":"stdout","timestamp":18500.871,"text":"[BROWSER CONSOLE] info: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold\n"}
{"type":"after","callId":"pw:api@35","endTime":18838.784,"annotations":[]}
{"type":"before","callId":"pw:api@36","stepId":"pw:api@36","parentId":"test.step@33","startTime":18841.176,"class":"Test","method":"pw:api","title":"Wait for function","params":{"pollingInterval":"undefined","expression":"() => {\n    const loadingSkeleton = document.querySelector('[data-testid=\"loading-skeleton\"]');\n    return !loadingSkeleton;\n  }","isFunction":"true","arg":"Object","timeout":"0"},"stack":[{"file":"/app/tests/e2e/helpers.ts","line":197,"column":14,"function":"programmaticLogin"}]}
{"type":"stdout","timestamp":18897.504,"text":"[BROWSER CONSOLE] log: [E2E DIAGNOSTIC] ./App imported successfully: true\n"}
{"type":"stdout","timestamp":18897.688,"text":"[BROWSER CONSOLE] warning: [E2E MODE] Analytics disabled entirely.\n"}
{"type":"stdout","timestamp":18910.796,"text":"[BROWSER CONSOLE] warning: You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS.\n"}
{"type":"stdout","timestamp":18976.604,"text":"[BROWSER CONSOLE] log: [getSupabaseClient] Using injected mock Supabase client.\n"}
{"type":"stdout","timestamp":18978.152,"text":"[BROWSER CONSOLE] warning: ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.\n"}
{"type":"stdout","timestamp":18978.432,"text":"[BROWSER CONSOLE] warning: ⚠️ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.\n"}
{"type":"after","callId":"pw:api@36","endTime":19127.619,"annotations":[]}
{"type":"before","callId":"pw:api@37","stepId":"pw:api@37","parentId":"test.step@33","startTime":19130.076,"class":"Test","method":"pw:api","title":"Evaluate","params":{"expression":"async ({\n    token,\n    timestamp\n  }) => {\n    var _supabase;\n    const fakeSession = {\n      access_token: token,\n      refresh_token: 'fake-refresh-token-for-e2e',\n      token_type: 'bearer',\n      expires_in: 3600,\n      expires_at: timestamp + 3600,\n      user: {\n        id: 'test-user-123',\n        email: 'test@example.com',\n        aud: 'authenticated',\n        role: 'authenticated',\n        app_metadata: {\n          provider: 'email',\n          providers: ['email']\n        },\n        user_metadata: {\n          name: 'Test User'\n        },\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      }\n    };\n    await ((_supabase = window.supabase) === null || _supabase === void 0 ? void 0 : _supabase.auth.setSession(fakeSession));\n  }","isFunction":"true","arg":"Object"},"stack":[{"file":"/app/tests/e2e/helpers.ts","line":209,"column":14,"function":"programmaticLogin"}]}
{"type":"after","callId":"pw:api@37","endTime":19386.487,"annotations":[]}
{"type":"before","callId":"pw:api@38","stepId":"pw:api@38","parentId":"test.step@33","startTime":19388.092,"class":"Test","method":"pw:api","title":"Evaluate","params":{"expression":"() => {\n    return new Promise(resolve => {\n      document.addEventListener('e2e-profile-loaded', () => resolve());\n    });\n  }","isFunction":"true","arg":"Object"},"stack":[{"file":"/app/tests/e2e/helpers.ts","line":235,"column":14,"function":"programmaticLogin"}]}
{"type":"error","message":"\u001b[31mTest timeout of 120000ms exceeded.\u001b[39m","stack":[]}
{"type":"before","callId":"hook@39","stepId":"hook@39","startTime":138134.398,"class":"Test","method":"hook","title":"After Hooks","params":{},"stack":[]}
{"type":"before","callId":"fixture@40","stepId":"fixture@40","parentId":"hook@39","startTime":138204.673,"class":"Test","method":"fixture","title":"Fixture \"page\"","params":{},"stack":[]}
{"type":"after","callId":"fixture@40","endTime":138204.901,"annotations":[]}
{"type":"before","callId":"fixture@41","stepId":"fixture@41","parentId":"hook@39","startTime":138205.211,"class":"Test","method":"fixture","title":"Fixture \"context\"","params":{},"stack":[]}
{"type":"before","callId":"pw:api@42","stepId":"pw:api@42","parentId":"fixture@41","startTime":138327.918,"class":"Test","method":"pw:api","title":"Close context","params":{"reason":"Test timeout of 120000ms exceeded."},"stack":[]}
{"type":"after","callId":"pw:api@38","endTime":138355.756,"annotations":[],"error":{"name":"","message":"Error: page.evaluate: Test timeout of 120000ms exceeded.","stack":"Error: page.evaluate: Test timeout of 120000ms exceeded.\n    at programmaticLogin (/app/tests/e2e/helpers.ts:235:14)\n    at /app/tests/e2e/smoke.e2e.spec.ts:13:7\n    at /app/tests/e2e/smoke.e2e.spec.ts:12:5"}}
{"type":"after","callId":"test.step@33","endTime":138356.591,"annotations":[],"error":{"name":"","message":"Error: page.evaluate: Test timeout of 120000ms exceeded.","stack":"Error: page.evaluate: Test timeout of 120000ms exceeded.\n    at programmaticLogin (/app/tests/e2e/helpers.ts:235:14)\n    at /app/tests/e2e/smoke.e2e.spec.ts:13:7\n    at /app/tests/e2e/smoke.e2e.spec.ts:12:5"}}
{"type":"error","message":"Error: page.evaluate: Test timeout of 120000ms exceeded.","stack":[{"file":"/app/tests/e2e/helpers.ts","line":235,"column":14,"function":"programmaticLogin"},{"file":"/app/tests/e2e/smoke.e2e.spec.ts","line":13,"column":7},{"file":"/app/tests/e2e/smoke.e2e.spec.ts","line":12,"column":5}]}
{"type":"after","callId":"pw:api@42","endTime":145303.671,"annotations":[]}
{"type":"after","callId":"fixture@41","endTime":145314.504,"attachments":[{"name":"video","contentType":"video/webm","sha1":"f5cb4c2eda3e544634b9020f74298427c91180b4"}],"annotations":[]}
{"type":"before","callId":"attach@9463591f779675529cfbc6dec7e0a076","stepId":"attach@9463591f779675529cfbc6dec7e0a076","startTime":145316.162,"class":"Test","method":"test.attach","title":"Attach \"error-context\"","params":{},"stack":[]}
{"type":"after","callId":"attach@9463591f779675529cfbc6dec7e0a076","endTime":145316.173,"attachments":[{"name":"error-context","contentType":"text/markdown","sha1":"15b5357302e2226c74682bc265f0cd112a7d4279"}]}
{"type":"before","callId":"fixture@51","stepId":"fixture@51","parentId":"hook@39","startTime":145319.13,"class":"Test","method":"fixture","title":"Fixture \"baseURL\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@51","endTime":145319.184,"annotations":[]}
{"type":"before","callId":"fixture@52","stepId":"fixture@52","parentId":"hook@39","startTime":145319.596,"class":"Test","method":"fixture","title":"Fixture \"userAgent\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@52","endTime":145319.637,"annotations":[]}
{"type":"before","callId":"fixture@54","stepId":"fixture@54","parentId":"hook@39","startTime":145320.259,"class":"Test","method":"fixture","title":"Fixture \"viewport\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@54","endTime":145320.294,"annotations":[]}
{"type":"before","callId":"fixture@61","stepId":"fixture@61","parentId":"hook@39","startTime":145322.915,"class":"Test","method":"fixture","title":"Fixture \"isMobile\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@61","endTime":145322.951,"annotations":[]}
{"type":"before","callId":"fixture@62","stepId":"fixture@62","parentId":"hook@39","startTime":145323.137,"class":"Test","method":"fixture","title":"Fixture \"ignoreHTTPSErrors\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@62","endTime":145323.163,"annotations":[]}
{"type":"before","callId":"fixture@65","stepId":"fixture@65","parentId":"hook@39","startTime":145324.799,"class":"Test","method":"fixture","title":"Fixture \"hasTouch\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@65","endTime":145324.864,"annotations":[]}
{"type":"before","callId":"fixture@67","stepId":"fixture@67","parentId":"hook@39","startTime":145325.329,"class":"Test","method":"fixture","title":"Fixture \"deviceScaleFactor\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@67","endTime":145325.359,"annotations":[]}
{"type":"after","callId":"hook@39","endTime":145326.798,"attachments":[{"name":"screenshot","contentType":"image/png","sha1":"ec1eccb6fe9f666143fc8a3acfe48a4e089b7c0d"}],"annotations":[]}
{"type":"before","callId":"hook@73","stepId":"hook@73","startTime":145327.107,"class":"Test","method":"hook","title":"Worker Cleanup","params":{},"stack":[]}
{"type":"before","callId":"fixture@76","stepId":"fixture@76","parentId":"hook@73","startTime":145328.234,"class":"Test","method":"fixture","title":"Fixture \"video\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@76","endTime":145328.271,"annotations":[]}
{"type":"before","callId":"fixture@77","stepId":"fixture@77","parentId":"hook@73","startTime":145328.601,"class":"Test","method":"fixture","title":"Fixture \"browser\"","params":{},"stack":[]}
{"type":"after","callId":"fixture@77","endTime":145353.069,"annotations":[]}
{"type":"before","callId":"fixture@81","stepId":"fixture@81","parentId":"hook@73","startTime":145354.306,"class":"Test","method":"fixture","title":"Fixture \"defaultBrowserType\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@81","endTime":145354.461,"annotations":[]}
{"type":"before","callId":"fixture@82","stepId":"fixture@82","parentId":"hook@73","startTime":145354.804,"class":"Test","method":"fixture","title":"Fixture \"screenshot\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@82","endTime":145354.85,"annotations":[]}
{"type":"before","callId":"fixture@86","stepId":"fixture@86","parentId":"hook@73","startTime":145356.064,"class":"Test","method":"fixture","title":"Fixture \"headless\"","params":{},"stack":[{"file":"project#chromium","line":1,"column":1}],"group":"configuration"}
{"type":"after","callId":"fixture@86","endTime":145356.102,"annotations":[]}
{"type":"after","callId":"hook@73","endTime":145356.458,"annotations":[]}